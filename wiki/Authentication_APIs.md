### Authentication Token Request

To acquire an authentication token, perform a `GET` or `POST` to `/auth_token`.

##### Ohmage Account Request 

Generates an authentication token with a user's ohmage credentials.

| Parameter Name | Description |
| --- | --- |
| email | The user's email address. |
| password | The user's password. | 

###### Example 

    POST /ohmage/auth_token HTTP/1.1
    Content-Type: application/x-www-form-urlencoded
 
    email=email@example.com&password=strong_password

##### Provider Account Request

Generates an authentication token with a user's third-party provider credentials.

| Parameter Name | Description |
| --- | --- |
| provider | The provider's ohmage identifier. E.g., `google`. |
| access_token | The access token generated by the provider. | 

###### Example 

    POST /ohmage/auth_token?provider=google&access_token=0CCD7590-66A7-11E3-949A-0800200C9A66 HTTP/1.1
    Content-Type: application/x-www-form-urlencoded
 

##### Refresh Token Request

Generates an authentication token with a user's ohmage refresh token.

| Parameter Name | Description |
| --- | --- |
| refresh_token | The refresh token generated by ohmage upon a successful login |

###### Example 

    POST /ohmage/auth_token?refresh_token=2345DEC0-66A7-11E3-949A-0800200C9A66 HTTP/1.1
    Content-Type: application/x-www-form-urlencoded

#### Response

##### Success

The response body will contain a JSON object with the following key-value pairs.

| Key | Value |
| --- | --- |
| access_token | A string representing an access token. |
| refresh_token | A string representing a refresh token. |
| granted | A long millisecond UNIX epoch value. |
| expires | A long millisecond UNIX epoch value denoting when the access token expires. |

##### Example

    HTTP/1.1 200 OK
    Content-Type: application/json

    {
        "access_token":"f60eb3f5-3cda-4984-a857-4f5ae4805d05",
        "refresh_token":"f8eb8fb1-050e-4d29-9f74-60e31dc37d52",
        "username":"username",
        "granted":1387233885883,
        "expires":1387235685883
    }

##### Failure

| HTTP Response Code | Description |
| --- | --- |
| 400 | Parameters are missing. |
| 401 | Parameters are invalid (E.g., wrong password, unknown provider, bad provider token, bad refresh token). |
| 409 | The user has not activated their account or the user has not completed the authorization process with the third-party provider. |

The response body is a plain text error message intended to be displayed to end users.

### Token Invalidation Request

Invalidates an authentication token (logout the user).

Since the auth token is always provided as a HTTP header value, the same method is used here.

###### Example

    DELETE /ohmage/auth_token HTTP/1.1
    Authorization: ohmage F206CB70-66A7-11E3-949A-0800200C9A66

###### Response

If the Authorization header isn't present or is not syntactically correct, an HTTP 400 is returned. Otherwise, an HTTP 200 is returned. The response will not contain a body.

